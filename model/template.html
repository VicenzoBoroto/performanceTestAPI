<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório de Métricas</title>
    <link rel="stylesheet" href="model/css/style.css">
    <script>
        var dataAtual = new Date();
        var dataFormatada = dataAtual.getDate() + '/' + (dataAtual.getMonth()+1) + '/' + dataAtual.getFullYear();
        var horaFormatada = dataAtual.getHours() + ':' + dataAtual.getMinutes() + ':' + dataAtual.getSeconds();
        window.onload = function() {
          var header = document.querySelector('header');
          header.innerHTML = 'Verificação realizada: ' + dataFormatada + ' às ' + horaFormatada;
        }
      </script>
</head>
<body>
    <h1>API Verificada</h1>
    <h2>{{ url }}</h2>
    <header></header>
    <div style="padding: 10px;">
        <nav>
            <ul>
                <button id="report-btn" onclick="showReport()" style="--clr:#1dbdfc"><span>Reports</span><i></i></button>
                <button id="graph-btn" onclick="showGraph()"style="--clr:#1dbdfc"><span>Gráfico</span><i></i></button>
            </ul>
        </nav>
    </div>
    <div id="report-content">
        <div class="central-card">
            <div class="card-title">Tempo Total</div>
            <div class="card-value">{{ total_time }}/Segundo</div>
            <br>
            <div class="card-title">Total Requisições:</div>
            <div class="card-value">{{ total_requests }}</div>
            <div class="card-title">Codes:</div>
            <div class="card-value">{{ error_info }}</div>            
        </div>
        <div class="grid-container">
            <div class="card">
                <div class="card-title">Tempo Médio de Resposta:</div>
                <div class="card-value">{{ mean_response_time }}/Segundo</div>
            </div>
            <div class="card">
                <div class="card-title">Pico de Tempo:</div>
                <div class="card-value">{{ peak_response_time }}/Segundo</div>
            </div>
            <div class="card">
                <div class="card-title">Percentil 90:</div>
                <div class="card-value">{{ p90_response_time }}/Segundo</div>
            </div>
            <div class="card">
                <div class="card-title">Tempo de Requisições</div>
                <div class="card-value">{{ requests_per_second }}/Segundo</div>
            </div>
            <div class="card">
                <div class="card-title">Latência Média</div>
                <div class="card-value">{{ average_latency }}</div>
            </div>
            <div class="card">
                <div class="card-title">Uso Médio de CPU</div>
                <div class="card-value">{{ average_cpu_usage }}</div>
            </div>
            <div class="card">
                <div class="card-title">Uso Médio de Memória</div>
                <div class="card-value">{{ average_memory_usage }}</div>
            </div>
            <div class="card">
                <div class="card-title">Tempo Médio de Recuperação</div>
                <div class="card-value">{{ average_recovery_time }}/Segundo</div>
            </div>
            <div class="card-last-child">
                <div class="card-title">Taxa de Erro</div>
                <div class="card-value">{{ error_rate }}</div>
            </div>            
        </div>
    </div>
    <div id="graph-content" style="display: none;">
        <div class="graph-container">
            <div class="graph img">
                <img src="reports/graphic.svg" alt="Gráfico de Linhas">
            </div>
        </div>
    </div>    
    <script>
        function showGraph() {
            document.getElementById("report-btn").classList.remove("active");
            document.getElementById("graph-btn").classList.add("active");
            document.getElementById("report-content").style.display = "none";
            document.getElementById("graph-content").style.display = "block";
        }
        function showReport() {
            document.getElementById("report-btn").classList.add("active");
            document.getElementById("graph-btn").classList.remove("active");
            document.getElementById("report-content").style.display = "block";
            document.getElementById("graph-content").style.display = "none";
      }
    </script> 
    <footer>
        <img src="model/css/logoR.png" style="margin-top: 10px;">
        <h6>&copy; 2023 Todos os direitos reservados</h6>
        <h6>Desenvolvido por: Diego Saltori & Vicenzo Pompermayer</h6>
    </footer>   
  </body>
